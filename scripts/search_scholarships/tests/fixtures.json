{
  "description": "Test fixtures for ScholarshipOps triage rules",
  "version": "1.0",
  "test_cases": [
    {
      "id": "TC-001",
      "name": "Home fee status only -> C",
      "description": "Scholarship requiring Home fee status should be rejected",
      "input": {
        "name": "UK Domestic Scholarship",
        "amount": "£5,000",
        "deadline": "2026-06-30",
        "eligibility": ["Home fee status only", "UK residents"],
        "notes": "Available to students with UK fee status",
        "url": "https://example.ac.uk/scholarship"
      },
      "expected": {
        "bucket": "C",
        "matched_rules": ["E-FEE-001"],
        "reason_contains": "Home/UK fee status"
      }
    },
    {
      "id": "TC-002",
      "name": "International students + postgraduate taught -> A/B",
      "description": "Scholarship for international PGT students should qualify",
      "input": {
        "name": "International Excellence Award",
        "amount": "£10,000",
        "deadline": "2026-06-30",
        "eligibility": ["International students", "Postgraduate taught programmes"],
        "notes": "Merit-based scholarship for international students",
        "url": "https://example.ac.uk/international"
      },
      "expected": {
        "bucket_in": ["A", "B"],
        "matched_rules": ["P-INTL-001", "P-LEVEL-001"],
        "score_min": 50
      }
    },
    {
      "id": "TC-003",
      "name": "404 dead link -> C",
      "description": "Scholarship with dead link should be flagged",
      "input": {
        "name": "Old Scholarship",
        "amount": "£3,000",
        "deadline": "2026-06-30",
        "eligibility": ["All students"],
        "notes": "",
        "url": "https://example.ac.uk/not-found",
        "http_status": 404
      },
      "expected": {
        "bucket": "C",
        "link_status": "NotFound"
      }
    },
    {
      "id": "TC-004",
      "name": "429 rate limited -> B + retry",
      "description": "Rate limited URL should go to B bucket for retry",
      "input": {
        "name": "Rate Limited Scholarship",
        "amount": "£5,000",
        "deadline": "2026-06-30",
        "eligibility": ["International students"],
        "notes": "",
        "url": "https://example.ac.uk/rate-limited",
        "http_status": 429
      },
      "expected": {
        "bucket": "B",
        "matched_rules": ["B-LINK-001"],
        "reason_contains": "Rate limited"
      }
    },
    {
      "id": "TC-005",
      "name": "Processing fee / credit card -> C",
      "description": "Scholarship requiring payment should be rejected as scam",
      "input": {
        "name": "Guaranteed Scholarship",
        "amount": "£50,000",
        "deadline": "2026-06-30",
        "eligibility": ["All students"],
        "notes": "Processing fee required. Credit card needed for application.",
        "url": "https://suspicious-site.com/scholarship"
      },
      "expected": {
        "bucket": "C",
        "matched_rules": ["S-SCAM-001"],
        "reason_contains": "payment"
      }
    },
    {
      "id": "TC-006",
      "name": "Deadline missing -> B/watchlist",
      "description": "Scholarship without deadline should go to watchlist",
      "input": {
        "name": "TBD Deadline Scholarship",
        "amount": "£5,000",
        "deadline": "Check website",
        "eligibility": ["International students"],
        "notes": "Deadline to be announced",
        "url": "https://example.ac.uk/tbd"
      },
      "expected": {
        "bucket": "B",
        "matched_rules": ["B-DEADLINE-001"],
        "add_to_watchlist": true
      }
    },
    {
      "id": "TC-007",
      "name": "PhD only -> C",
      "description": "PhD-only scholarship should be rejected for master's applicant",
      "input": {
        "name": "Doctoral Research Fellowship",
        "amount": "Full funding",
        "deadline": "2026-06-30",
        "eligibility": ["PhD students only", "Research degree"],
        "notes": "For doctoral candidates only",
        "url": "https://example.ac.uk/phd"
      },
      "expected": {
        "bucket": "C",
        "matched_rules": ["E-LEVEL-PHD-001"],
        "reason_contains": "PhD"
      }
    },
    {
      "id": "TC-008",
      "name": "US citizens only -> C",
      "description": "Nationality-restricted scholarship should be rejected",
      "input": {
        "name": "American Excellence Award",
        "amount": "Full tuition",
        "deadline": "2026-06-30",
        "eligibility": ["US citizens only", "American passport holders"],
        "notes": "For outstanding American students",
        "url": "https://example.org/us-only"
      },
      "expected": {
        "bucket": "C",
        "reason_contains": "US citizens"
      }
    }
  ],
  "profile": {
    "nationality": "Taiwan",
    "target_university": "University of Glasgow",
    "target_country": "UK",
    "programme_level": "master",
    "programme_start": "2026-09-14"
  }
}
