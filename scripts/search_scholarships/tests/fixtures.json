{
  "description": "Test fixtures for ScholarshipOps triage rules",
  "version": "2.0",
  "test_cases": [
    {
      "id": "TC-GLA-001",
      "name": "Glasgow Global Leadership Scholarship -> A",
      "description": "High-value Glasgow scholarship for international students should be bucket A",
      "input": {
        "name": "Glasgow Global Leadership Scholarship",
        "amount": "£10,000 fee discount",
        "deadline": "2026-02-15",
        "deadline_date": "2026-02-15",
        "eligibility": ["International students", "Postgraduate taught programmes", "All nationalities"],
        "notes": "For students who demonstrate exceptional leadership potential",
        "url": "https://www.gla.ac.uk/scholarships/globalleadershipscholarship/",
        "trust_tier": "S",
        "http_status": 200,
        "is_taiwan_eligible": true
      },
      "expected": {
        "bucket": "A",
        "matched_rules": ["P-TARGET-001", "P-INTL-001", "P-LEVEL-001"],
        "score_min": 100,
        "confidence_min": 0.7
      }
    },
    {
      "id": "TC-GLA-002",
      "name": "Glasgow Computing Science Bursary -> A/B",
      "description": "Computing-related Glasgow scholarship should score high",
      "input": {
        "name": "School of Computing Science Excellence Award",
        "amount": "£5,000",
        "deadline": "2026-03-01",
        "deadline_date": "2026-03-01",
        "eligibility": ["MSc Software Development", "MSc Data Science", "International students welcome"],
        "notes": "Merit-based award for computing programmes",
        "url": "https://www.gla.ac.uk/schools/computing/postgraduate/funding/",
        "trust_tier": "S",
        "http_status": 200
      },
      "expected": {
        "bucket_in": ["A", "B"],
        "matched_rules": ["P-TARGET-001", "P-COMPUTING-001", "P-LEVEL-001"],
        "score_min": 80
      }
    },
    {
      "id": "TC-GLA-003",
      "name": "Glasgow Scotland Saltire Scholarship -> B (needs verification)",
      "description": "Scotland-specific scholarship may need eligibility verification",
      "input": {
        "name": "Scotland's Saltire Scholarship",
        "amount": "£8,000",
        "deadline": "2026-05-31",
        "deadline_date": "2026-05-31",
        "eligibility": ["Selected countries including Taiwan", "Science, Technology, Creative Industries"],
        "notes": "Funded by Scottish Government",
        "url": "https://www.scotland.org/study/saltire-scholarships",
        "trust_tier": "A",
        "http_status": 200
      },
      "expected": {
        "bucket_in": ["A", "B"],
        "matched_rules": ["P-TAIWAN-001"],
        "score_min": 40
      }
    },
    {
      "id": "TC-001",
      "name": "Home fee status only -> C",
      "description": "Scholarship requiring Home fee status should be rejected",
      "input": {
        "name": "UK Domestic Scholarship",
        "amount": "£5,000",
        "deadline": "2026-06-30",
        "eligibility": ["Home fee status only", "UK residents"],
        "notes": "Available to students with UK fee status",
        "url": "https://example.ac.uk/scholarship"
      },
      "expected": {
        "bucket": "C",
        "matched_rules": ["E-FEE-001"],
        "reason_contains": "Home/UK fee status"
      }
    },
    {
      "id": "TC-002",
      "name": "International students + postgraduate taught -> A/B",
      "description": "Scholarship for international PGT students should qualify",
      "input": {
        "name": "International Excellence Award",
        "amount": "£10,000",
        "deadline": "2026-06-30",
        "eligibility": ["International students", "Postgraduate taught programmes"],
        "notes": "Merit-based scholarship for international students",
        "url": "https://example.ac.uk/international"
      },
      "expected": {
        "bucket_in": ["A", "B"],
        "matched_rules": ["P-INTL-001", "P-LEVEL-001"],
        "score_min": 50
      }
    },
    {
      "id": "TC-003",
      "name": "404 dead link -> C",
      "description": "Scholarship with dead link should be flagged",
      "input": {
        "name": "Old Scholarship",
        "amount": "£3,000",
        "deadline": "2026-06-30",
        "eligibility": ["All students"],
        "notes": "",
        "url": "https://example.ac.uk/not-found",
        "http_status": 404
      },
      "expected": {
        "bucket": "C",
        "link_status": "NotFound"
      }
    },
    {
      "id": "TC-004",
      "name": "429 rate limited -> B + retry",
      "description": "Rate limited URL should go to B bucket for retry",
      "input": {
        "name": "Rate Limited Scholarship",
        "amount": "£5,000",
        "deadline": "2026-06-30",
        "eligibility": ["International students"],
        "notes": "",
        "url": "https://example.ac.uk/rate-limited",
        "http_status": 429
      },
      "expected": {
        "bucket": "B",
        "matched_rules": ["B-LINK-001"],
        "reason_contains": "Rate limited"
      }
    },
    {
      "id": "TC-005",
      "name": "Processing fee / credit card -> C",
      "description": "Scholarship requiring payment should be rejected as scam",
      "input": {
        "name": "Guaranteed Scholarship",
        "amount": "£50,000",
        "deadline": "2026-06-30",
        "eligibility": ["All students"],
        "notes": "Processing fee required. Credit card needed for application.",
        "url": "https://suspicious-site.com/scholarship"
      },
      "expected": {
        "bucket": "C",
        "matched_rules": ["S-SCAM-001"],
        "reason_contains": "payment"
      }
    },
    {
      "id": "TC-006",
      "name": "Deadline missing -> B/watchlist",
      "description": "Scholarship without deadline should go to watchlist",
      "input": {
        "name": "TBD Deadline Scholarship",
        "amount": "£5,000",
        "deadline": "Check website",
        "eligibility": ["International students"],
        "notes": "Deadline to be announced",
        "url": "https://example.ac.uk/tbd"
      },
      "expected": {
        "bucket": "B",
        "matched_rules": ["B-DEADLINE-001"],
        "add_to_watchlist": true
      }
    },
    {
      "id": "TC-007",
      "name": "PhD only -> C",
      "description": "PhD-only scholarship should be rejected for master's applicant",
      "input": {
        "name": "Doctoral Research Fellowship",
        "amount": "Full funding",
        "deadline": "2026-06-30",
        "eligibility": ["PhD students only", "Research degree"],
        "notes": "For doctoral candidates only",
        "url": "https://example.ac.uk/phd"
      },
      "expected": {
        "bucket": "C",
        "matched_rules": ["E-LEVEL-PHD-001"],
        "reason_contains": "PhD"
      }
    },
    {
      "id": "TC-008",
      "name": "US citizens only -> C",
      "description": "Nationality-restricted scholarship should be rejected",
      "input": {
        "name": "American Excellence Award",
        "amount": "Full tuition",
        "deadline": "2026-06-30",
        "eligibility": ["US citizens only", "American passport holders"],
        "notes": "For outstanding American students",
        "url": "https://example.org/us-only"
      },
      "expected": {
        "bucket": "C",
        "reason_contains": "US citizens"
      }
    },
    {
      "id": "TC-009",
      "name": "US State Residency Required -> C",
      "description": "Scholarship requiring US state residency should be rejected",
      "input": {
        "name": "Washington State Community Foundation Scholarship",
        "amount": "$10,000",
        "deadline": "2026-04-01",
        "eligibility": ["Must be a resident of Washington State", "High school seniors"],
        "notes": "Seattle Foundation scholarship for local students",
        "url": "https://www.seattlefoundation.org/scholarships"
      },
      "expected": {
        "bucket": "C",
        "matched_rules": ["E-RESIDENCY-001"],
        "reason_contains": "US state"
      }
    },
    {
      "id": "TC-010",
      "name": "Deadline passed -> X",
      "description": "Scholarship with past deadline should go to X bucket for next cycle",
      "input": {
        "name": "Past Deadline Scholarship",
        "amount": "£5,000",
        "deadline": "2025-12-31",
        "deadline_date": "2025-12-31",
        "eligibility": ["International students"],
        "notes": "Good scholarship but deadline passed",
        "url": "https://example.ac.uk/past"
      },
      "expected": {
        "bucket": "X",
        "matched_rules": ["T-DEAD-PAST-001"],
        "reason_contains": "passed"
      }
    },
    {
      "id": "TC-011",
      "name": "AND semantics test - regex matches but deadline fails",
      "description": "Rule with multiple conditions should require ALL to pass",
      "input": {
        "name": "Test Scholarship",
        "amount": "£5,000",
        "deadline": "2027-12-31",
        "deadline_date": "2027-12-31",
        "eligibility": ["Undergraduate only"],
        "notes": "For bachelor students",
        "url": "https://example.ac.uk/ug"
      },
      "expected": {
        "bucket": "C",
        "matched_rules": ["E-LEVEL-UG-001"],
        "reason_contains": "Undergraduate"
      }
    },
    {
      "id": "TC-012",
      "name": "High confidence + near deadline -> A",
      "description": "High quality lead with near deadline should be bucket A",
      "input": {
        "name": "High Quality Scholarship",
        "amount": "£15,000",
        "deadline": "2026-02-01",
        "deadline_date": "2026-02-01",
        "eligibility": ["International students", "MSc programmes", "All nationalities"],
        "notes": "Fully funded scholarship at University of Glasgow",
        "url": "https://www.gla.ac.uk/scholarships/example/",
        "trust_tier": "S",
        "http_status": 200,
        "is_taiwan_eligible": true
      },
      "expected": {
        "bucket": "A",
        "confidence_min": 0.8,
        "score_min": 100
      }
    },
    {
      "id": "TC-013",
      "name": "Low confidence + no deadline -> Watchlist",
      "description": "Low quality lead with unknown deadline should go to watchlist",
      "input": {
        "name": "Unknown Scholarship",
        "amount": "See website",
        "deadline": "TBD",
        "eligibility": [],
        "notes": "",
        "url": "https://unknown-site.com/scholarship",
        "trust_tier": null,
        "http_status": null
      },
      "expected": {
        "bucket_in": ["B", "C"],
        "add_to_watchlist": true,
        "confidence_max": 0.5
      }
    },
    {
      "id": "TC-014",
      "name": "Portable scholarship (Chevening) -> High score",
      "description": "Major portable UK scholarship should score high",
      "input": {
        "name": "Chevening Scholarship",
        "amount": "Full tuition + living costs",
        "deadline": "2026-11-03",
        "deadline_date": "2026-11-03",
        "eligibility": ["All nationalities", "Return to home country", "Leadership potential"],
        "notes": "UK Government flagship scholarship. Chevening is the UK government's international scholarships programme.",
        "url": "https://www.chevening.org/scholarships/",
        "trust_tier": "A",
        "http_status": 200
      },
      "expected": {
        "bucket_in": ["A", "B"],
        "matched_rules": ["P-INTL-001", "P-FULL-001"],
        "score_min": 50
      }
    }
  ],
  "profile": {
    "nationality": "Taiwan",
    "target_university": "University of Glasgow",
    "target_country": "UK",
    "programme_level": "master",
    "programme_start": "2026-09-14",
    "target_programme_keywords": ["Software Development", "Computing Science", "Computer Science"]
  }
}
